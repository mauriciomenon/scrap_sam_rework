# SCRAP_SAM - Configuração automática do ambiente
# Ativa automaticamente o ambiente virtual ao entrar no diretório

# Usar pyenv para gerenciar versão do Python
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"
eval "$(pyenv init -)"

# Criar e ativar ambiente virtual se não existir
if [ ! -d ".venv" ]; then
    echo "Criando ambiente virtual..."
    python -m venv .venv
fi

# Ativar ambiente virtual
source .venv/bin/activate

# Instalar dependências se requirements.txt existir e ambiente estiver limpo
if [ -f "requirements.txt" ] && [ ! -f ".venv/requirements_installed" ]; then
    echo "Instalando dependências..."
    pip install --upgrade pip
    pip install -r requirements.txt
    touch .venv/requirements_installed
fi

# Configurar variáveis de ambiente
export PYTHONPATH="${PYTHONPATH}:$(pwd)/src"
export SCRAP_SAM_ENV="development"

echo "Ambiente SCRAP_SAM ativado!"
echo "Python: $(python --version)"
echo "Pip: $(pip --version)"
